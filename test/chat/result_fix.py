from graphmind.utils.llm_output_parser import try_parse_json_object

broken_json = "```json\n[{\n  \"实体1\": \"递推关系计数法\",\n  \"实体2\": \"递推公式\",\n  \"关系\": \"定义\",\n  \"描述\": \"递推关系计数法是一种通过递推公式来计算有限集合的方法。\"\n}, {\n  \"实体1\": \"递推公式\",\n  \"实体2\": \"递推关系式\",\n  \"关系\": \"同义\",\n  \"描述\": \"递推公式和递推关系式是同一概念，用于描述数列中各项与前若干项之间的计算关系。\"\n}, {\n  \"实体1\": \"递推公式\",\n  \"实体2\": \"递推公式的初值\",\n  \"关系\": \"组成\",\n  \"描述\": \"递推公式中需要确定一个或多个初始项的值，这些初始项的值称为递推公式的初值。\"\n}, {\n  \"实体1\": \"递推公式\",\n  \"实体2\": \"特解\",\n  \"关系\": \"应用\",\n  \"描述\": \"如果一个数列的各项都满足递推关系，则称该数列为该递推关系的一个特解。\"\n}, {\n  \"实体1\": \"等差数列\",\n  \"实体2\": \"递推公式\",\n  \"关系\": \"示例\",\n  \"描述\": \"等差数列可以用递推公式表示，其递推公式为$a_{n}=a_{n-1}+d$。\"\n}, {\n  \"实体1\": \"等比数列\",\n  \"实体2\": \"递推公式\",\n  \"关系\": \"示例\",\n  \"描述\": \"等比数列可以用递推公式表示，其递推公式为$b_{n}=b_{n-1}q$。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"组合计算\",\n  \"关系\": \"应用\",\n  \"描述\": \"递推关系是求解组合计算问题的重要工具。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"数学分支\",\n  \"关系\": \"应用\",\n  \"描述\": \"递推关系在几乎所有的数学分支中都有着十分重要的作用。\"\n}, {\n  \"实体1\": \"递推关系计数法\",\n  \"实体2\": \"有限集合的计数\",\n  \"关系\": \"应用\",\n  \"描述\": \"递推关系计数法用于解决有限集合的计数问题。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"求解问题演化规律\",\n  \"关系\": \"应用\",\n  \"描述\": \"要使用递推关系解决有限集合的计数问题，首先必须针对求解问题演化规律建立相应的递推关系式。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"建模\",\n  \"关系\": \"应用\",\n  \"描述\": \"递推关系用于对动态过程进行建模，以揭示数列中各项的动态演变规律。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"计算表达式\",\n  \"关系\": \"组成\",\n  \"描述\": \"递推关系是一种计算表达式，用于描述数列中各项与前若干项之间的计算关系。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"动态演变过程\",\n  \"关系\": \"描述\",\n  \"描述\": \"递推关系用于描述数列中各项的动态演变过程。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"数列\",\n  \"关系\": \"描述\",\n  \"描述\": \"递推关系用于描述数列中各项与前若干项之间的联系。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"计算\",\n  \"关系\": \"应用\",\n  \"描述\": \"递推关系用于计算数列中各项的值。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"确定初始项的值\",\n  \"关系\": \"条件\",\n  \"描述\": \"为使递推公式能够进行递推计算，通常需要确定公式中一个或多个初始项的值。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"动态过程\",\n  \"关系\": \"建模\",\n  \"描述\": \"递推关系用于对动态过程进行建模。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"揭示动态演变规律\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于揭示数列中各项的动态演变规律。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"计算表达式\",\n  \"关系\": \"组成\",\n  \"描述\": \"递推关系是一种计算表达式，用于描述数列中各项与前若干项之间的计算关系。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"数列的动态演变过程\",\n  \"关系\": \"描述\",\n  \"描述\": \"递推关系用于描述数列的动态演变过程。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"计算数列的值\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于计算数列的值。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"建立递推关系式\",\n  \"关系\": \"步骤\",\n  \"描述\": \"要使用递推关系解决有限集合的计数问题，首先必须建立相应的递推关系式。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"逐步实现\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于逐步实现对有限集合的计数。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"解决组合计算问题\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于解决组合计算问题。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"数学分支\",\n  \"关系\": \"应用\",\n  \"描述\": \"递推关系在几乎所有的数学分支中都有着十分重要的作用。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"揭示数列的动态演变规律\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于揭示数列的动态演变规律。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"计算数列的值\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于计算数列的值。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"建立递推关系式\",\n  \"关系\": \"步骤\",\n  \"描述\": \"要使用递推关系解决有限集合的计数问题，首先必须建立相应的递推关系式。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"逐步实现\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于逐步实现对有限集合的计数。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"解决组合计算问题\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于解决组合计算问题。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"数学分支\",\n  \"关系\": \"应用\",\n  \"描述\": \"递推关系在几乎所有的数学分支中都有着十分重要的作用。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"揭示数列的动态演变规律\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于揭示数列的动态演变规律。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"计算数列的值\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于计算数列的值。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"建立递推关系式\",\n  \"关系\": \"步骤\",\n  \"描述\": \"要使用递推关系解决有限集合的计数问题，首先必须建立相应的递推关系式。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"逐步实现\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于逐步实现对有限集合的计数。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"解决组合计算问题\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于解决组合计算问题。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"数学分支\",\n  \"关系\": \"应用\",\n  \"描述\": \"递推关系在几乎所有的数学分支中都有着十分重要的作用。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"揭示数列的动态演变规律\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于揭示数列的动态演变规律。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"计算数列的值\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于计算数列的值。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"建立递推关系式\",\n  \"关系\": \"步骤\",\n  \"描述\": \"要使用递推关系解决有限集合的计数问题，首先必须建立相应的递推关系式。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"逐步实现\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于逐步实现对有限集合的计数。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"解决组合计算问题\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于解决组合计算问题。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"数学分支\",\n  \"关系\": \"应用\",\n  \"描述\": \"递推关系在几乎所有的数学分支中都有着十分重要的作用。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"揭示数列的动态演变规律\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于揭示数列的动态演变规律。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"计算数列的值\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于计算数列的值。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"建立递推关系式\",\n  \"关系\": \"步骤\",\n  \"描述\": \"要使用递推关系解决有限集合的计数问题，首先必须建立相应的递推关系式。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"逐步实现\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于逐步实现对有限集合的计数。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"解决组合计算问题\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于解决组合计算问题。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"数学分支\",\n  \"关系\": \"应用\",\n  \"描述\": \"递推关系在几乎所有的数学分支中都有着十分重要的作用。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"揭示数列的动态演变规律\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于揭示数列的动态演变规律。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"计算数列的值\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于计算数列的值。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"建立递推关系式\",\n  \"关系\": \"步骤\",\n  \"描述\": \"要使用递推关系解决有限集合的计数问题，首先必须建立相应的递推关系式。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"逐步实现\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于逐步实现对有限集合的计数。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"解决组合计算问题\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于解决组合计算问题。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"数学分支\",\n  \"关系\": \"应用\",\n  \"描述\": \"递推关系在几乎所有的数学分支中都有着十分重要的作用。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"揭示数列的动态演变规律\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于揭示数列的动态演变规律。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"计算数列的值\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于计算数列的值。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"建立递推关系式\",\n  \"关系\": \"步骤\",\n  \"描述\": \"要使用递推关系解决有限集合的计数问题，首先必须建立相应的递推关系式。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"逐步实现\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于逐步实现对有限集合的计数。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"解决组合计算问题\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于解决组合计算问题。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"数学分支\",\n  \"关系\": \"应用\",\n  \"描述\": \"递推关系在几乎所有的数学分支中都有着十分重要的作用。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"揭示数列的动态演变规律\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于揭示数列的动态演变规律。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"计算数列的值\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于计算数列的值。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"建立递推关系式\",\n  \"关系\": \"步骤\",\n  \"描述\": \"要使用递推关系解决有限集合的计数问题，首先必须建立相应的递推关系式。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"逐步实现\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于逐步实现对有限集合的计数。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"解决组合计算问题\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于解决组合计算问题。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"数学分支\",\n  \"关系\": \"应用\",\n  \"描述\": \"递推关系在几乎所有的数学分支中都有着十分重要的作用。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"揭示数列的动态演变规律\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于揭示数列的动态演变规律。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"计算数列的值\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于计算数列的值。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"建立递推关系式\",\n  \"关系\": \"步骤\",\n  \"描述\": \"要使用递推关系解决有限集合的计数问题，首先必须建立相应的递推关系式。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"逐步实现\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于逐步实现对有限集合的计数。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"解决组合计算问题\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于解决组合计算问题。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"数学分支\",\n  \"关系\": \"应用\",\n  \"描述\": \"递推关系在几乎所有的数学分支中都有着十分重要的作用。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"揭示数列的动态演变规律\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于揭示数列的动态演变规律。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"计算数列的值\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于计算数列的值。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"建立递推关系式\",\n  \"关系\": \"步骤\",\n  \"描述\": \"要使用递推关系解决有限集合的计数问题，首先必须建立相应的递推关系式。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"逐步实现\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于逐步实现对有限集合的计数。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"解决组合计算问题\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于解决组合计算问题。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"数学分支\",\n  \"关系\": \"应用\",\n  \"描述\": \"递推关系在几乎所有的数学分支中都有着十分重要的作用。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"揭示数列的动态演变规律\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于揭示数列的动态演变规律。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"计算数列的值\",\n  \"关系\": \"目的\",\n  \"描述\": \"递推关系用于计算数列的值。\"\n}, {\n  \"实体1\": \"递推关系\",\n  \"实体2\": \"建立递推关系式\",\n  \"关系\": \"步骤\",\n  \""
broken_json2 = "```json\n{\n  \"鸽笼原理\": {\n    \"定义\": \"数学原理，指出将多于n个元素分成n个集合时，至少有一个集合含有两个或以上元素。\",\n    \"提出者\": \"狄利克雷\",\n    \"别称\": \"抽屉法则\"\n  },\n  \"抽屉法则\": {\n    \"定义\": \"鸽笼原理的通俗说法，指将物品放入抽屉时，至少有一个抽屉包含两个或更多物品。\",\n    \"别称\": \"鸽笼原理\"\n  },\n  \"狄利克雷\": {\n    \"身份\": \"数学神童\",\n    \"贡献\": \"提出鸽笼原理\"\n  },\n  \"定理1.11\": {\n    \"内容\": \"多于n个元素分成n个集合时，至少有一个集合含有两个或以上元素。\"\n  },\n  \"定理1.12\": {\n    \"内容\": \"将n个元素分成m个集合（m<n），则至少有一个集合含有至少$\\lfloor(n-1)/m\\rfloor+1$个元素。\"\n  }\n}\n```"
broken_json3 = "```json\n{\n  \"P_c(n,r)\": {\n    \"定义\": \"不重复圆排列数计算公式\",\n    \"用途\": \"计算圆排列的数量\"\n  },\n  \"圆排列计算公式\": {\n    \"公式\": \"P_c(n,r)=\\frac{P(n,r)}{r}=\\frac{n(n-1)(n-2)\\cdots(n-r+1)}{r}=\\frac{n!}{r(n-r)!}\"\n  },\n  \"组合\": {\n    \"定义\": \"从集合中任意取出元素组成的子集合\"\n  },\n  \"不重复组合\": {\n    \"定义\": \"从集合中任意取出不同元素组成的子集合\"\n  },\n  \"组合数\": {\n    \"定义\": \"不重复组合的数量\",\n    \"公式\": \"C(n,r)=\\frac{P(n,r)}{r!}=\\frac{n(n-1)(n-2)\\cdots(n-r+1)}{r!}=\\frac{n!}{r!(n-r)!}\"\n  }\n}\n```"

fixed_output, result = try_parse_json_object(broken_json2, expect_type="dict")

print(fixed_output)
print("----------------")
print(result)

