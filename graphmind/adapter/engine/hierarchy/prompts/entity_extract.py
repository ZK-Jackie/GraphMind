system_prompt = (
    "你是一位高效的知识提取专家，你的任务是根据输入的教材信息（包括书籍名称、章节标题、文段标题及正文内容），执行以下两项任务："
    "1. 实体提取：从提供的文段中提取出核心知识实体（如“概念, 定理, 性质, 原理, 算法, 推导过程, 实验名称, 数学家”等），"
    "忽略任何举例、说明所用的字母、数字、符号。"
    "2. 知识点等级划分：为每个知识实体分配一个1至7的评级，结合你对《离散数学》全书知识结构的理解，参考正文文本所处的标题等级下，"
    "在此过程中："
    " - 基础概念（如集合运算、集合定义等）尽管在本章节重要，但应被视为全书中细化的基础知识，评级数值通常>3。"
    " - 性质类知识点（如定律、规则等）通常为具体解释操作或概念的性质，评级数值应当>4，除非其在全书或学科中有跨章节的重要性。"
    " - 定理类知识点通常比性质类重要，尤其是跨章节或跨学科的定理（如德摩根律），它们的评级应高于性质类，评级数值应当>2。"
    " - 工具类知识点（如文氏图）仅为辅助理解的工具，评级数值应当>5。"
    "评级标准中，避免过高评级局部重要但全书不常见的知识点。保证每个知识点的评级符合其在全书中的作用和重要性。"
    # " - 每个知识点的评级必须有简要解释，明确其在整个学科或全书中的相对重要性。"
)

user_prompt_template = (
    "## 任务\n"
    "从输入的{book}教材信息中提取关键知识点名词，并为每个知识点评级。"
    "评级基于知识点在学科中的基础性、重要性和广泛性，其中数值1代表最高级别，数值7代表最低级别。"
    "忽略公式字母、辅助例子和其他无关内容。\n\n"
    
    "## 工作流程\n"
    "步骤1：从书籍名称、文段标题以及正文内容中识别主要知识点实体，知识实体不能是任何举例、说明所用的字母、数字、符号。\n"
    "步骤2：对于步骤1提取的每个实体，结合标题次序、正文文本描述，少量结合你自身的知识储备，参考以下评级标准为每个实体分配一个1至7的评级：\n"
    "  - 1级：教材中的最高层次标题，是知识的核心主题、主干知识、该章节或单元的核心概念，通常涵盖一个广泛的知识领域。\n"
    "  - 2级：代表某个子领域的独立内容，通常解释1级知识点的主要部分或特定侧面。\n"
    "  - 3级：依次是对2级知识点的进一步细化，通常是对于某个概念或理论的解释、定义或重要细节。\n"
    "  - 4级：往往是对3级知识点的补充解释或具体化，是细节的展示或进一步说明。\n"
    "  - 5级：是对某个特定的概念或理论进行应用、演示或举例的内容，帮助学生更好地理解4级知识点。\n"
    "  - 6级：对应于一些知识点的边缘细节、注释或额外内容，是对某一细节的进一步解释、引申或跨学科的联系，但不构成主线内容。\n"
    "  - 7级：是对6级知识点的补充或极为边缘的细节，通常不作为核心学习内容。\n"
    "步骤3：对每个实体进行分类，确保每个实体与“概念, 定理, 性质, 原理, 算法, 实验名称, 数学家”等类别之一严格对应。\n"
    # "步骤4：简要解释每个知识点的分级依据，依照指定格式输出实体名称、实体类型、评级、评级解释。\n\n"
    "步骤4：依照指定格式输出实体名称、实体类型、评级。\n\n"
    "## 注意\n"
    "- 忽略数学公式中的字母，如变量、常数等。\n"
    "- 忽略文本中的标点符号和数字。\n"
    "- 不能以完整的标题名字作为实体。\n"
    "- 不能以任何举例、说明所用的字母、数字、符号作为实体。\n"
    "## 示例\n"
    "{output_example}\n\n"
    "## 输出格式\n"
    "{output_format}\n\n"
    "## 真实数据\n"
    "输入：\n"
    "```"
    "{insertion}\n"
    "```\n\n"
    "输出："
)

prompt_insertion_template = (
    "{level_name}：{level_content}\n"
)

prompt_output_format = (
# '[{"实体名称": 实体名称1, "实体类型": 实体类型1, "评级": 评级1, "评级解释": 评级解释1}, {"实体名称": 实体名称2, "实体类型": 实体类型2, "评级": 评级2, "评级解释": 评级解释2},...]'
'[{"实体名称": 实体名称1, "实体类型": 实体类型1, "评级": 评级1}, {"实体名称": 实体名称2, "实体类型": 实体类型2, "评级": 评级2},...]'
)

user_output_example = """示例输入:
```
书籍名称：离散数学
一级标题：第一章  集合与计数基础
正文文本：离散数学以各种离散量的概念、关系、结构和运算性质为研究对象，以充分满足计算机相关学科对离散量进行表示和处理的数学需求。正如微积分支撑了作为近代工业文明基础的物理学，离散数学支撑了作为现代信息社会基础的计算机科学。事实上，离散数学是一门综合的数学学科，由多个数学分支组成，包括集合论、数理逻辑、图论、数论、组合分析、代数结构等，分别从不同角度出发研究各种离散量之间数与形的关系。本章比较系统地介绍集合论与计数的基础知识， 它们是学习各个离散数学分支所必备的入门基础。 尽管读者可能已经从其它途径获悉其中某些概念，但是要想掌握作为支撑整个计算机学科基石的离散数学，就必须重新审视和系统地学习这些入门知识。
```
示例输出:
[{"实体名称": "离散数学", "实体类型": "概念", "评级": 1}, {"实体名称": "集合论", "实体类型": "概念", "评级": 2}, {"实体名称": "计数基础", "实体类型": "概念", "评级": 2}, {"实体名称": "数理逻辑", "实体类型": "概念", "评级": 3}, {"实体名称": "图论", "实体类型": "概念", "评级": 3}, {"实体名称": "数论", "实体类型": "概念", "评级": 3}, {"实体名称": "组合分析", "实体类型": "概念", "评级": 3}, {"实体名称": "代数结构", "实体类型": "概念", "评级": 3}]
"""
# [{"实体名称": "离散数学", "实体类型": "概念", "评级": 1, "评级解释": "离散数学是整个学科的核心主题，涵盖了多个数学分支，是现代信息社会基础的支撑。"}, {"实体名称": "集合论", "实体类型": "概念", "评级": 2, "评级解释": "集合论是离散数学的一个重要分支，涉及基础知识的系统介绍。"}, {"实体名称": "计数基础", "实体类型": "概念", "评级": 2, "评级解释": "计数基础是学习离散数学分支的必备入门知识，对整个学科有基础性作用。"}, {"实体名称": "数理逻辑", "实体类型": "概念", "评级": 3, "评级解释": "数理逻辑是离散数学的一个分支，对理解离散量之间的关系有重要作用，但在本章中不是主要介绍内容。"}, {"实体名称": "图论", "实体类型": "概念", "评级": 3, "评级解释": "图论是离散数学的重要组成部分，但在此章节中仅作为学科分支提及，不深入讨论。"}, {"实体名称": "数论", "实体类型": "概念", "评级": 3, "评级解释": "数论作为离散数学的分支之一，在学科中占有一席之地，但本章不作为重点。"}, {"实体名称": "组合分析", "实体类型": "概念", "评级": 3, "评级解释": "组合分析在离散数学中占据重要位置，但在此章节中不是主要内容。"}, {"实体名称": "代数结构", "实体类型": "概念", "评级": 3, "评级解释": "代数结构是离散数学的一个重要分支，但在本章中仅简单提及。"}]

text_level_names = ["书籍名称", "一级标题", "二级标题", "三级标题", "四级标题", "五级标题", "六级标题", "七级标题",
                    "八级标题", "文本内容"]