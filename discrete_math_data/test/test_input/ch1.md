# 第一章  集合与计数基础  

离散数学以各种离散量的概念、关系、结构和运算性质为研究对象，以充分满足计算机相关学科对离散量进行表示和处理的数学需求。正如微积分支撑了作为近代工业文明基础的物理学，离散数学支撑了作为现代信息社会基础的计算机科学。事实上，离散数学是一门综合的数学学科，由多个数学分支组成，包括集合论、数理逻辑、图论、数论、组合分析、代数结构等，分别从不同角度出发研究各种离散量之间数与形的关系。本章比较系统地介绍集合论与计数的基础知识， 它们是学习各个离散数学分支所必备的入门基础。 尽管读者可能已 经从其它途径获悉其中某些概念，但是要想掌握作为支撑整个计算机学科基石的离散数学，就必须重新审视和系统地学习这些入门知识。


## § 1.1 集合的基本知识  

集合论是整个数学的基础和出发点， 当然也是离散数学的基础和出发点， 要学好离散数 学，首先必须学习集合论的有关知识。学习集合论还有一个非常重要的原因，那就是计算机的各个领域都与集合论有着极其密切的关系。因为集合不仅可以表示数值信息，而且还可表示和处理各种非数值信息，例如对各种数据的增删查改、对数据之间关系的描述等等，甚至可以让这些数据信息像数值一样进行运算。在本节，我们将学习集合论的基本知识，包括数学危机与集合论的由来、集合的概念与表示、集合的基本运算及运算性质等。  

### 1.1.1 数学危机与集合论  

众所周知，数学是整个自然科学体系的基础，人们对自然界的认识结论一般需要通过数学演算或数学证明来保证其正确性。打铁还需自身硬，从理论上说，数学既然能够作为一种可以鉴别认识结论真伪的基本工具，那么其自身就不应该有任何错误或矛盾。但实际情况并没有这么简单，千百年来陆续出现的希帕索斯悖论、贝克莱悖论、理发师悖论，使得数学理论的正确性面临一次又一次严峻挑战，历史上称之为数学危机。为拯救数学于危机之中，捍卫数学理论的正确性，无数杰出科学家做了大量深入系统的研究工作。直到在十九世纪初，柯西、维尔斯特拉斯等数学家通过创立极限理论，终于解决了希帕索斯悖论、贝克莱悖论问题，为实数理论和微积分的正确性奠定了坚实的基础。  

但是，极限理论在逻辑上还有需要完善的地方.因为极限概念由自然数定义，要保证极限理论的正确性，首先必须要保证自然数概念及相关理论的正确性。虽然自然数是大家熟知且常用的一个基本概念，大家从小学就开始学习自然数的计数和运算，但是对自然数概念的理解主要还是依靠经验。为保证极限理论的正确性，必须对自然数进行正式的数学定义。数学家冯·诺依曼用集合的方式定义了自然数并取得成功。由此，对整个数学理论体系正确性和无矛盾性的论证就转化为对集合论的正确性和无矛盾性的论证，集合论成为整个数学大厦的根基。尽管卢素提出理发师悖论指出了集合论的局限性，一度动摇了这个根基，但是有惊无险，策莫罗提出的公理化集合论有效解决了理发师悖论问题，不仅稳定了数学根基，而且进一步确立了集合论在整个数学大厦中的基础地位。集合论被誉为十九世纪最伟大的数学成就，集合论的创始人康托被誉为整个十九世纪最伟大的数学家，没有之一。  

### 1.1.2 集合的概念与表示  

集合论从一个比数更加基本的概念——集合出发，定义出数和数的运算，进而演化出整个数学学科的理论体系。本小节将从集合的基本概念出发，介绍集合论中最为基础的知识，包括集合概念的含义、元素的概念与性质、集合的表示方法、集合之间的相等与包含关系、若干常用的特殊集合等。  

#### 一、集合与元素的概念  

我们知道，如果要定义一个概念，必须要使用其它概念。例如，在“边长相等的三角形是等边三角形”这个定义中，就要用到边长、相等、三角形等概念。而要定义其它概念就必须使用另外其它的概念，而且不能循环使用。如此下去，必然会存在一些最原始的概念作为一切概念的出发点，只能使用这些原始概念来定义其它概念而不能用其它概念来定义这些原始概念。也就是说，这些原始概念的含义是不言自明的，只能通过其它的概念去理解或解释其含义，而不能对其下严格的定义。例如，几何学中的点、线、面的概念就是原始概念，我们都知道这些概念的具体含义，但它们是没有定义的。  

集合就是这样一种没有定义的原始概念，我们可对其含义进行如下描述或理解：  

所谓集合，就是在指定范围内满足给定条件、能相互区分的所有对象构成的总体，集合中每个对象称为该集合的元素。  

（1） 硬币有两面——正面和反面，“正面、反面”构成一集合。（2） 计算机内存的全体单元构成一集合。 （3） 所有三角形构成的三角形集合。 （4） 所有正整数的集合。  

根据集合概念的上述解释，不难看出元素与集合之间的归属关系是明确的：对于任意一个集合和任意一个对象，该对象要么属于这个集合，要么不属于这个集合，两者必居其一且仅居其一。除此之外，还可看出集合中每个元素必须满足如下三条基本性质：  

1。互异性：集合中的每个元素都是互不相同的，凡是相同的元素都视为同一元素。例如集合{5, 5, 6}应该理解为$\{5,\,6\}$。  

2。可分性：集合中的每个元素都是可以明确加以区分的对象。3。无序性：集合中的元素之间是没有次序的。例如：{5, 6}和{6, 5}应视为同一集合。  

通常用带下标或不带下标的大写英文字母$A$，$B$，$C$，…表示集合，用带下标或不带下标的小写英文字母$x$，y，$z$，…表示集合中的对象或元素。  

【定义1.1】对于任意一个对象$x$ 和任意一个集合𝐴，当对象$x$ 是集合$\cdot A$中元素时，称$x$属于𝑨，记为$x\in A$；当对象$x$ 不是集合$A$ 中元素时，称$_x$ 不属于$A$，记为$x\notin A$。  

罗素悖论产生的原因是集合的定义不受限制。经过研究发现如果允许将集合作为其自身的元素，则会产生一些矛盾或悖论.因此，德国数学家康托之后创立的许多公理化集合论都直接或间接地限制集合成为它自己的元素，有效避免了罗素悖论。  

#### 二、集合的表示方法  

集合的表示方法主要有枚举法、描述法、归纳法和文氏图法。  

##### 1.枚举法  

所谓枚举法，就是列出集合中所有元素或者可以看出元素变化规律的部分元素。对于一个集合，如果该集合中仅含个数较少的有限个元素，或者集合中元素之间有明显关系时，通常使用枚举法表示该集合。  



枚举法表示的是集合的外延，是一种显示表示方法，具有直观性强、易于理解等优点。但对于元素数目较多的集合，枚举法显然不是一种有效方法、甚至不可行。从计算机的角度看，如果一次性将大量数据输入计算机，将占据大量内存。因此，有时需要使用描述法、归纳法等其它方式来表示集合。  

##### 2.描述法  

所谓描述法，就是描述集合中元素所具备的某种特性来表示集合。通常用数学符号来表示集合中的任意元素都具有性质$P$。集合描述法表示的具体形式如下：  

$$
A=\{x|P(x)\}
$$

其中：符号$P(x)$表示元素$x$具有性质$P$  



描述法表示的是集合的内涵，是一种隐式表示方法，表达内容具有一定的抽象性和普适性。描述法的优点是不需要列出集合中全部元素，只需给出集合中元素的描述特性。因此，描述法的表达能力很强，既可表示有限集合，也可表示无限集合。  

##### 3.归纳法  

归纳法是一种基于构造策略的表示方法。该方法通过定义一些规则把集合构造出来，由此实现对集合的表示。具体的构造规则通常由如下三个部分组成：  

（1）基础部分：确定集合中某些最基本的元素；（2）归纳部分：确定由集合中已有元素构造出新元素的规则或方法；（3）边界部分：确定集合在通过构造元素实现不断扩张的过程中不能超过的界限。  

上述基础部分决定了该集合为非空集合并确定了集合的初始元素，归纳部分则根据集合中初始元素通过一定的规则或方法不断构造出新的元素，是集合不断扩张的过程，边界部分则是对集合的扩张进行限制，给出了集合的边界，由此构成一个具有确定边界的集合。  

总之，基础部分和归纳部分确定了集合中至少包含哪些元素，边界部分则是确定了集合中最多包含哪些元素。  

集合归纳表示法的构造性特点非常适合用计算机进行处理，在计算机相关领域得到广泛应用。在后续内容中，我们将会看到，通过用归纳法构造集合的方式来定义一个概念或设计一个算法，在计算机相关领域是一件屡见不鲜的事情。  



##### 4.文氏图法  

文氏图（或称文恩图）以英国数学家文恩的名字命名.文恩在1881 年介绍了这种图的使用方法。文氏图用长方形表示全集，用长方形内部的圆或其它几何图形表示普通集合。文氏图常用于形象地表示集合之间的关系。  



#### 三、集合与集合的关系  

如前所述，集合中凡是相同的元素都看成是同一个元素，而且集合中元素之间的排列次序也不加区分，或者说是无序的。如此一来，集合就完全取决于集合中的元素。换句话说，对于任意两个集合，如果这两个集合中具有完全相同的元素，那么这两个集合就是完全一样的。或者说，这两个集合是相等的。于是得到如下关于集合相等的外延性原理：  

【定理1.1】（外延性原理）对于任意的集合$A$ 和集合$B$，$\pmb{A}$ 与$\pmb{B}$ 相等当且仅当两者具有相同元素；或者说，$\pmb{A}$ 与$\pmb{B}$ 相等当且仅当$A$ 中每个元素都属于$B$ 且$B$ 中每个元素都属于$A$。如果集合$A$ 与$B$ 相等，则记为$A=B$；否则，如果$A$ 与$B$ 不相等，则记为$A\ne B$。  



【定理1.2】集合的相等关系具有如下三条基本性质： （1）自反性：对于任意给定的集合$A$，成立$A{=}A$； （2）对称性：对于任意给定的两个集合$A$ 和$B$，若有$A{=}B$，则有$B{=}A$；  

（3）传递性：对于任意三个集合$A$、$B$、$C$，若有$A{=}B$ 且$B{=}C$，则有$_{A=C}$  



由【例题1.9】可以看出，集合$C$ 中的每个元素都是集合$A$ 中的元素，此时$A$ 完全包含了$C$，可将$C$ 看成是$A$ 的一个部分，由此得到如下集合的包含关系和子集的概念：  

【定义1.2】对于任意两个集合$A$ 和$B$，若$B$ 中的每个元素都是$A$ 中的元素，则称$\pmb{B}$ 包含于$\pmb{A}$（或$\pmb{A}$ 包含$\pmb{B}$），记为$B\subseteq A$，亦称$\pmb{B}$ 是$\pmb{A}$ 的子集，称符号$\subseteq$为集合之间的包含关系。如果$B$ 不能被$A$ 所包含，则称$\pmb{B}$ 不是$\pmb{A}$ 的子集，记为$B\nsubseteq A$。  

【定理1.3】集合的包含关系具有如下三条基本性质：（1）自反性：对于任意给定的集合$A$，都成立$A\subseteq A$  

（2）反对称性：对于任意两个集合$A$ 和$B$，$A{=}B$当且仅当$A\subseteq B$且$B\subseteq A$（3）传递性：对于任意三个集合$A$、$B$、$C$，若$A\subseteq B$且$B\subseteq C$，则$A\subseteq C$  



【定义1.3】对于任意两个集合$A$ 和$B$，如果$B\subseteq A$且$A\neq B$，则称$B$ 是$A$ 的真子集，记为$\mathrm{B}\subset\mathrm{A}$，并称符号$\subset$为集合之间的真包含关系。  


### 1.1.3 集合的基本运算  

我们学过实数的加、减、乘、除、乘方、开方等各种运算，通过这些运算可由已有实数生成新的实数。事实上，从数学方法论的角度来看，运算一种非常基本的数学手段。对于任何一个数学概念，在确定其内涵之后，我们总是通过构造概念运算的方式产生新的概念，代数式通过运算可以产生新的代数式、函数通过运算可以产生新的函数、命题通过运算可以产生新的命题、矩阵通过运算可以产生新的矩阵，等等。对集合的学习和探讨也是如此，在掌握集合的基本概念之后，下面进一步学习集合的基本运算及其性质，通过运算机制从已有集合中构造出新的集合，具体包括交运算、并运算、差运算、补运算和对称差运算。  

#### 一、交运算与并运算  

有时候需要将两个集合的中的元素合并起来构成一个新的集合，由此得到集合并运算的概念；有时需要将两个集合中的共同部分取出来构成一个新的集合，由此得到集合交运算的概念。这两个运算的具体定义如下：  

【定义1.10】对于任意两个集合$A$ 和$B$， $A\cup B=\left\{x\middle|x\in A\right.$或者$\cdot x\in B\}$称为$A$ 和$B$ 并集，亦称$A\cup B$为集合$A$ 和$B$ 的并运算；$A\cap B=\{x|x\in A$并且$x\in B.$}称为$A$ 和$B$ 交集，亦  称$A\cap B$为集合$A$ 和$B$ 的交运算。  

由上述定义可知，对于任意两个集合$A$ 和$B$，两者并运算的结果产生一个新集合，该集合是由$A$ 和$B$ 中元素合并而成，如图$1{\cdot}2(a)$所示；两者交运算结果产生另外一个新集合，该集合由$A$ 和$B$ 的共同部分组成，或者说由同时属于$A$ 和$B$ 的元素组成，如图1-2(b)所示。  

![](images/4fb6199ac21b049856dda6721c89f3d4f0739da1971ad0bbc7426e82d630f6b5.jpg)  
图1-2 并、交运算的文氏图  



不难看出，并运算和交运算其实分别就是实数加法和乘法在集合论领域的推广。根据并运算与交运算的定义，不难证明它们满足如下基本运算性质：  

(1) 幂等律：对于任意集合$A$，有：$A\cup A=A$；$A\cap A=A$ (2) 交换律：对于任意两个集合$A$ 和$B$，有：$A\cup B=B\cup A$；$A\cap B=B\cap A$ (3) 结合律：对于任意三个集合$A,\ B$ 和$C$，有：  

$$
(A\cup B)\cup C=A\cup(B\cup C);\;\;(A\cap B)\cap C=A\cap(B\cap C)
$$

(4) 同一律：对于任意集合$A$，有：$A\cup\varnothing=A$；$A\cap U=A$(5) 零  律：对于任意集合$A$，有：$A\cup U=U$；$A\cap\varnothing=\varnothing$(6) 分配律：对于任意三个集合$A,\ B$ 和$C$，有：  

$$
\begin{array}{r}{A\cap(B\cup C)=(A\cap B)\cup(A\cap C)}\\ {A\cup(B\cap C)=(A\cup B)\cap(A\cup C)}\end{array}
$$

(7) 吸收律：对于任意两个集合$A$ 和$B$，有：  

$$
A\cup(A\cap B)=A;\,\,\,A\cap(A\cup B)=A
$$

(8) 对于任意两个集合$A$ 和$B$，有：  

$A\subseteq B$当且仅当$A\cup B=B$ $A\subseteq B$当且仅当$A\cap B=A$  

其中$U$和$\varnothing$分别表示全集和空集。  

上述性质既可根据文氏图简单直观地得到，也可根据集合相等的定义给出数学证明。现仅以分配律为例进行证明，读者可自行给出其余性质的证明。  



上述两个集合的并与交运算可以推广到如下多个集合的情形：  

【定义1.11】对于任意$n$ 个集合$A_{1},A_{2},\ldots,A_{n}$，其交运算和并运算分别为：  

$A_{1}\cap A_{2}\cap,\ldots,\cap A_{n}=\{x|x\in A_{1}$ 或 ${\boldsymbol{x}}\in A_{2}$ 或 …  或 $\textstyle{\boldsymbol{x}}\in A_{n}]$ }   $A_{1}\cup A_{2}\cup,\ldots,\cup A_{n}=\{x|x\in A_{1}$ 且 $x\in A_{2}$ 且 …  且 $x\in A_{n}\}$  



#### 二、差运算与补运算  

对于任意给定的两个集合$A$ 和$B$，有时需要将属于$A$ 但不属于$B$ 的所有元素取出来构成一个新的集合，由此得到如下集合差运算的概念：  

【定义1.12】对于任意给定的两个集合$A$ 和$B$，集合$\cdot A-B=\{x|x\in A$并且$x\notin B\}$称为$A$ 与$B$ 的差集，$A-B$亦称为集合𝐴与$B$的差运算；令$U$表示全集，则${\bar{A}}=U-A=\{x|x\in$$U$且$x\notin A\}$称为$A$ 的补集，亦称$\bar{A}$为对集合$A$ 的补运算。  

一般来说，所谓两个对象互补，是指这两个对象之间无共同部分并且若将两者合并则构成一个完整的整体。如果将全集𝑈看成是一个完整的整体，那么任何一个集合与它的补集显然构成一种互补关系。图1-3 为集合差运算和补运算的文氏图。  

![](images/3dd3ff26327d44646f11d3b3940708dbd5563cf42578e139e0a56534e35c5eff.jpg)  
图1-3 差、补运算的文氏图  



不难看出，集合的差运算和补运算其实就是实数减法运算在集合论中的推广。根据集合差运算与补运算的定义，不难证明它们满足如下基本运算性质：  

(1) 矛盾律：对于任意给定的集合$A$，有：$A\cap{\bar{A}}=\emptyset$；(2) 排中律：对于任意给定的集合$A$，有：$A\cup\bar{A}=U$  

(3) 双重否定律：对于任意给定的集合$A$，有：$\bar{\bar{A}}=A$  

(4) 德摩根律：对于任意给定的两个集合$A$ 和$B$，有： $\overline{{A\cup B}}=\bar{A}\cap\bar{B},\,\,\,\overline{{A\cap B}}=\bar{A}\cup\bar{B}$  

(5) 对于任意给定的三个集合$A$、$B$ 和$C$，有：  

$A\cup(B\cup C)=(A\cup B)\cup C;\;A\cap(B\cap C)=(A\cap B)\cap C\circ$ $A\cap(B\cup C)=(A\cap B)\cup(A\cap C);\;A\cup(B\cap C)=(A\cup B)\cap(A\cup C)\,.$ $A\cap(A\cup B)=A;\,\,\,A\cup(A\cap B)=A\,.$  

现仅以德摩根律为例给出上述运算性质的证明，读者可自行给出其余证明。【例题1.22】对于任意给定的两个集合$A$ 和$B$，证明如下德摩根律：  

$$
{\overline{{A\cup B}}}={\bar{A}}\cap{\overline{{B}}}\,;\;{\overline{{A\cap B}}}={\bar{A}}\cup{\bar{B}}
$$


### 1.1.4 集合的二进制表示  

集合在计算机中有着广泛的应用，一般都是将集合中的元素顺序的存放在计算机中，但这种存储方式会使得在计算集合的交、并、差等运算时需要对元素进行搜索，随之而来的是不必要的时间开销。为了避免这个问题，现在介绍一种比较有效的存储方法。  

假设全集$U$是有限集合，$A{=}\{a_{1},a_{2},{\ldots},a_{n}\}$是$U$的一个子集且对应一个长度为$n$的比特串$B{=}b_{1}b_{2}{...}b_{n}$。串$B$ 的每一位数字按如下方式取值：如果$a_{i}{\in}A$，则$b_{i}{=}1$，否则$b_{i}{=}0$。此时对于全集$U$ 的任意两个子集合，它们之间的交、并运算就可以按二进制数的布尔乘、布尔加运算进行，即：两个子集交的编码是两个子集编码对应位置的布尔乘；两个子集并的编码是两个子集编码对应位置的布尔加。布尔乘、布尔加的具体运算规则如下：  

$\begin{array}{r l r}{0+0=0}&{{}}&{0+1=1+0=1+1=1}\end{array}$ $\begin{array}{r l r}{1\times1=1}&{{}}&{0\times1=1\times0=0\times0=0}\end{array}$  

下面进一步考察集合补运算的二进制编码表示.假设集合$A{=}\{a_{1},\,a_{2},\,...,a_{n}\}$对应长度为$n$的比特串为$B{=}b_{1}b_{2}{\ldots}.b_{n}$，则集合$A$ 的补集的二进制编码只需要简单地把$B{=}b_{1}b_{2}{\ldots}b_{n}$ 中每个1换成0，每个0 换成1 即可。  



集合在数据库中具有着广泛应用，基于二进制编码的集合运算可以大大提高记录增、删、改的计算效率。数据库中数据在计算机系统中一般以二维表形式存在，可将其中每一列分别看作是一个集合，列标题就是该集合的名称，每一行是一个数据序列，称为记录。又可将整个二维表看成是记录的集合。下面考察一个具体例子：  



表1-1 二维表 
![](images/ed20520091902c2b692c4144896337caee56d7b09ec379326531846771b24a4c.jpg)  


## § 1.3 有限集的基本计数技术  

现考察有限集的度量问题，度量有限集的目标是要统计出集合中元素的个数。当集合不是以枚举方式出现时，对元素个数的统计有时就不一定是显然的，需要一些相关技巧或技术，称之为计数技术。有限集合的计数技术在计算机问题求解或算法设计中具有基础性的重要作用。例如对于算法设计来说，如果要设计出问题求解的有效算法，很多情况下需要计算或估算出解空间或状态空间大小规模。事实上，这些解空间就是一些有限集合，度量这些有限集的大小就需要对其进行计数。目前，计数技术可大致分为基本计数技术和高级计数技术这两种基本类型，本节主要学习若干基本计数技术，具体包括加法原理与乘法原理、容斥原理与鸽笼原理、排列计数与组合计数。  

### 1.3.1 加法原理与乘法原理  

加法原理和乘法原理是最基本的计数法则，其它所有计数方法或技巧都建立在这两个法则的基础之上。  

加法原理：对于任意一个有限集合$A$，如果它可以看成是多个集合的并集且这多个集合之间互不相交，即有：  

$$
A=A_{1}\cup A_{2}\cup\cdots\cup A_{n}\ \stackrel{\mathrm{~H~}}{\cdots}\ A_{i}\cap A_{j}=\varnothing\ \left(i\neq j\right)
$$

则有：  

$$
|A|=|A_{1}|+|A_{2}|+\cdots+|A_{n}|
$$

加法原理的另外一种说法如下：  

如果$n$ 个独立事件分别有$\cdot k_{1},k_{2},\cdots,k_{n}$种方式发生，那么这$n$ 个独立事件之一发生方式的总数$k$ 有可按下式计算：  

$$
k=k_{1}+k_{2}+\dots+k_{n}
$$

加法原理的含义非常直观，其正确性是显然的。使用加法原理进行计数的关键在于如何将一个有限集合适当划分为若干互不相交的子集，并计算这些子集的基数。如果完成一个任务可以采用很多种不同的方法，而且每一种方法又有很多种不同的选择，那么完成该项任务的总方法数就等于这些所有选择数的总和。  



### 1.3.2 容斥原理与鸽笼原理  

在前述加法原理中，我们将某个集合看成是由多个集合的并运算而构成，并且要求参与并运算的多个集合互不相交。现在将加法原理中多个集合互不相交的条件去掉，由此便可得到容斥原理。因此，容斥原理可看成是加法原理的一种推广形式。  

#### 一、容斥原理及其应用  

首先考察下列问题：假设某班共有50 人，其中有32 人会唱歌、26 人会跳舞、15 人既会唱歌又会跳舞，问多少人会唱歌或会跳舞？多少人既不会唱歌也不会跳舞？  

如图1-7 所示，集合$A$ 表示班上所有会唱歌的人，$B$ 表示班上所有会跳舞的人，$A\cap B$表示班上所有既会唱歌又会跳舞人，$A\cup B$表示班上所有会唱歌或者会跳舞人。  

不难看出，若将$A$ 与$B$ 的基数直接相加，即将分别表示$A$ 和$B$ 的两个区域直接相加，则图中表示$A\cap B$的阴影部分就是双层的。因此，要想像加法原理那样用$A$ 和$B$的基数和作为$A\cup B$的基数，就必须将表示𝐴∩$B$的阴影部分去掉一层，即减去一个$|A\cap B|$，故有：  

$$
|A\cup B|=|A|+|B|-|A\cap B|=32+26-15=43(\mathcal{A})
$$

显然，班上既不会唱歌也不会跳舞的人数为：  

$$
|{\overline{{A\cup B}}}|=|U|-|A\cup B|=50-43=7(\mathcal{A})
$$

![](images/83294eaaa652139fdc533ac2326406b29ebe30c3a5ea63f76c324c67d62b5655.jpg)  
图1-7 唱歌跳舞人数集合  

一般地，对于任意给定的两个有限集合，成立如下的容斥原理：【定理1.8】假设$A$ 和$B$ 是任意两个有限集合，则有：  

$$
|A\cup B|=|A|+|B|-|A\cap B|
$$



#### 二、鸽笼原理及其应用  

鸽笼原理是数学神童狄利克雷在9 岁时提出，那时他家中有九个鸽笼十只鸽子，他观察到这样一个现象：无论怎样分配鸽笼给鸽子，必然一个鸽笼里面至少有两只鸽子，便由此提出鸽笼原理，并用该原理解决很多数学问题。鸽笼原理有时也称为抽屉法则，通俗地说，就是将5 本书放在4 个抽屉里面，必然有一个抽屉至少有两本书。  

【定理1.11】如果把多于$n$ 个的元素按任一方式分成$n$ 个集合，那么至少有一个集合中含有两个或两个以上的元素。  



【定理1.12】将$n$ 个元素以任一方式分成$m$ 个集合且$m<n$，则必然存在一个集合中至少有含有$\lfloor(n-1)/m\rfloor+1$个元素。其中$\lfloor x\rfloor$表示对实数$x$ 进行向下下取整，即取不超过$x$ 的最大整数部分。  





### 1.3.3 排列计数与组合计数  

排列与组合是两类比较基本的计数问题，根据从集合中选择元素的有序与无序、是否允许重复等限制条件，可将这两类问题进一步划分为四种基本类型，即不重复的排列、不重复的组合、可重复的排列和可重复的组合。  

#### 一、不重复的排列与组合  

首先考察如下排列问题：  

某班有35 名同学，现从中选出15 名同学排成一排，问有多少种排列方式？  

这个问题有如下两个关键要点：第一、在排列中每位同学最多只能出现一次，也就是无重复性；第二、不同的次序构成不同的排列。由此得到如下不重复排列的概念：  

【定义1.21】假设$S$是由$n$ 个不同的元素组成的集合，从$S$中依次取出$r$ 个不同元素并将其按取出的次序排成一排，由此形成的一个有序排列称之为不重复$r\cdot$-排列，简称为$r\cdot$-排列或排列，不重复$r\cdot$-排列的个数称为不重复$r\cdot$-排列数，简称为$r\cdot$-排列数或排列数，记为${P}_{n}^{r}$或$P(n,r)$。称$r=n$时构成的排列称为全排列，$r<n$时构成的排列为选排列。  



根据乘法原理，显然可以得到如下结论：  

【定理1.13】对于任意两个正整数$n$ 和$r$，且$r\leq n$，成立如下$r\cdot$-排列数计算公式：  

$P(n,r)=n(n-1)(n-2)\cdots(n-r+1)\ \ ={\frac{n!}{(n-r)!}}$ 其中：$n!=n(n-1)(n-2)\cdots2\cdot1$  



【定义1.22】假设$S$是由$n$ 个不同的元素组成的集合，从$S$ 中依次取出$r$ 个不同元素并将其按取出的次序排成一个圆圈，由此形成的一个有序圆排列称之为不重复$r\cdot$-圆排列，简称为$r\cdot$-圆排列或圆排列，不重复$r\cdot$圆排列的个数称为不重复$r\cdot$-圆排列数，简称为$r\cdot$-圆排列数或圆排列数，记为${\cal P}_{c}(n,r)$。  

相对于上述圆排列的概念，有时亦将$r\cdot$-排列称为$r$-线排列或线排列。由前面分析不难看出，如果将每个$r\cdot$-线排列的首尾相连构成一个$r\cdot$-圆排列，则由此构成的所有圆排列必然有$r$倍的重复数。故有如下$r\cdot$-圆排列计算公式：  

【定理1.14】对于任意给定的两个正整数$n$ 和$r$，且$r\leq n$，其$r\cdot$-圆排列数为$P_{c}(n,r)$：  

$$
P_{c}(n,r)=\frac{P(n,r)}{r}=\frac{n(n-1)(n-2)\cdots(n-r+1)}{r}=\frac{n!}{r(n-r)!}
$$

以上例子的共有特点是所有选出的元素都有一定的次序。事实上，很多情况下并不需要选出的元素具有有次序。  

考察如下组合问题：  

某班有35 名同学，现从中任意选出15 名同学参加问卷活动，问有多少种选择方式？  

与前述$r$-排列问题不同的是，这个问题只考虑抽取的是哪15 名同学，并不考虑抽取次序以及与之相关的排列问题。由此得到如下不重复组合及相关组合数的概念：  

【定义1.23】假设$S$是由$n$ 个不同的元素组成的集合，从$S$中任意取出$r$ 个不同元素组成一个子集合，称每一个这样的子集合为一个不重复$r$-组合，简称为$r\cdot$-组合或组合，不重复$r$-组合的个数称为不重复$r\cdot$-组合数，简称为$r\cdot$-组合数或组合数，记为$C_{n}^{r}$或$C(n,r)$。  

显然， $r$ - 组合与 $r$ - 排列的区别在于 $r\cdot$ 组合不考虑组合中元素的排列次序， $r\cdot$ - 排列必须考 虑排列中各元素的排列次序。如果两个$r\cdot$-排列所含的元素完全相同，仅仅是排列次序不同，两个$r\cdot$-排列是同一个组合，由此得到有如下组合数计算公式：  

【定理1.15】对于任意两个正整数$n$ 和$r$，且$r\leq n$，成立如下$r-$组合数计算公式：  

$$
C(n,r)=\frac{P(n,r)}{r!}=\frac{n(n-1)(n-2)\cdots(n-r+1)}{r!}=\frac{n!}{r!(n-r)!}
$$

#### 二、可重复的排列  

现考察这样一个问题：用1、2、3 这3 个数字可以构成多少种不同的5 位数字？  

使用乘法原理不难知道该问题解为$\ 13^{5}=243$种。这显然是一个元素可以重复的排列问题，现具体讨论这类问题。我们知道，在经典集合论中，集合中元素是不可重复的。为解决集合中重复元素的表示问题，现引入重集的概念。与集合的概念一样，重集也是一个没有具体定义的原始概念，只有通过如下方式对其含义进行描述或理解：  

所谓重集，就是在指定范围内满足给定条件、且允许多个相同对象同时出现的所有对象构成的总体，重集中每个对象仍然称为该集合的元素，重集中相同元素的个数称为元素的重数。具体地说，如果一个重集中含有 $\cdot_{n_{1}}$ 个 $\cdot a_{1}$ ， $n_{2}$ 个 $a_{2}$ ， ⋯ ， $n_{m}$ 个 $a_{m}$ ，且 $n_{1}+n_{2}+\cdots+n_{m}=$ $n$，则称该重集为含有$n$个元素的$m$元重集，记为：$\{n_{1}\cdot a_{1},n_{2}\cdot a_{2},\cdots,n_{m}\cdot a_{m}\}.$。  

约定：$\infty\cdot a$表示元素$a$可在重集中出现任意多次；$\{\infty\cdot a_{1},\infty\cdot a_{2},\cdots,\infty\cdot a_{m}\}$则表示重集中所有元素均可出现任意多次，称其为无穷重$\pmb{m}$ 元重集。  

事实上，可将$m$ 元重集看成是由$m$ 个容器组成的容器组，其中第一个容器可以放入（或取出）$n_{1}$个元素$a_{1}$，第二个容器可以放入（或取出）$n_{2}$个元素$a_{2}$，…，第$m$个容器可以放入（或取出）$n_{m}$个元素$a_{m}$.对于$\infty\cdot a$，则可将其理解为可以放入（或取出）无穷多个元素$a$的容器.需要注意的是，通常认为重集不是集合，但可将集合看成是重集的特例。  

显然，用1、2、3 这个数字构成5 位数字，就是一个无穷重3 元重集中取出5 个元素的排列问题。一般地，这种重集排列问题或可重复排列问题的定义如下：  

【定义1.24】假设$\{n_{1}\cdot a_{1},n_{2}\cdot a_{2},\cdots,n_{m}\cdot a_{m}\}$是任意一个给定的重集，从该重集中依次取出$r$ 个元素并将其按取出的次序排成一排，由此形成的一个有序排列称之为可重复$r$-排列，可重复$r\mathbf{\cdot}$-排列的个数称为可重复$r$-排列数；令$\cdot n_{1}+n_{2}+\cdots n_{m}=n$，则称$\cdot r=n$时构成的排列称为全排列，$r<n$时构成的排列为选排列。  

通过乘法原理不难得到如下无穷重$m$ 元重集的可重复$r\mathbf{\cdot}$-排列数计算公式  

【定理1.16】假设$\{\infty\cdot a_{1},\infty\cdot a_{2},\cdots,\infty\cdot a_{m}\}$是任意一个给定的无穷重$m$ 元重集，该重集下可重复$r$-排列数为$m^{r}$。  

【证明】无穷重数$m$ 元重集$\{\infty\cdot a_{1}$，$\infty\cdot a_{2}$，⋯，$\infty\cdot a_{m}\}$ $r$-排列的每一个位置上，均有$m$  种选择方案，故而 $r$ - 排列数为 $\ \ \cdot m^{r}$ 。□  

【例题1.57】（1）用7 颗六彩珠串成长链，可串出多少种不同长链（假定六彩珠取之不尽，且不考虑链子的反转）？（2）至少用两种颜色的六彩珠串成7 珠环链，求环链的种数（假定六彩的珠子取之不尽，且不考虑链子的反转）？  



![](images/3f1e76f81dba91759e05f5e7aace97377518f23c7e8ea20e34523f4359261b28.jpg)  
图1-8 4-圆排列  

有穷集$m$ 元重集上可重复$r\mathbf{\cdot}$-排列数的计算是一个比较复杂的问题，有兴趣的同学可以查阅相关资料，不再赘述。在此仅考虑如下比较简单的全排列数的计算问题：  

【定理1.17】假设$\{n_{1}\cdot a_{1},n_{2}\cdot a_{2},\cdots,n_{m}\cdot a_{m}\}$是任意一个给定的含有$n$ 个元素的有限$m$元重集，从该重集中依次取出$n$ 个元素的全排列数为：  

$$
\frac{n!}{n_{1}!\cdot n_{2}!\cdot\dots\cdot n_{m}!}
$$



【例题1.58】EXCELLENT 单词含有9 个字母，若重新排序字母顺序，请问能构成多少个不同字符串？  



#### 三、可重复的组合  

考察如下可重复的组合问题：从包含苹果、橙子和梨子的筐中任取4 个水果招待客人，假设筐中苹果、橙子和梨子的个数均多于4 个且不关心取水果的次序，问有多少种取法？  

可对这4 个水果的取法做如下枚举：  

4 个苹果；4 个橙子；4 个梨子；3 个苹果，1 个橙子；3 个苹果，1 个梨子；3 个橙子，1 个苹果；3 个橙子，1 个梨子；3 个梨子，1 个苹果；3 个梨子，1 个橙子；2 个橙子，2 个苹果；2 个橙子，2 个梨子；2 个梨子，2 个苹果；2 个橙子，1 个苹果，1 个梨子；2 个苹果，1 个梨子，1 个橙子；2 个梨子，1 个苹果，1 个橙子。  

由此可知取法一共有15 种。当水果种类或取出数目比较大时，这种枚举方法显然是不可行的。在这个问题中，可以将包含苹果、橙子和梨子的筐子分别看成是一个重集。由于不考虑取水果的次序，因此可将该问题看成是一种基于重集的可重复的组合数计算问题。  

下面具体介绍可重复的组合数计算问题的相关概念及解法。  

【定义1.25】假设$\{n_{1}\cdot a_{1},n_{2}\cdot a_{2},\cdots,n_{m}\cdot a_{m}\}$是任意一个给定的重集，从该重集中任意取出$r$ 个元素组成一个子重集，称每一个这样的子重集为一个可重复$r\cdot$-组合，可重复$r\cdot$组合的个数称为可重复$r$-组合数。  

下面结合一个具体实例详细介绍可重复$r\cdot$-组合数的计算问题。  

【定理1.18】假设$\{n_{1}\cdot a_{1},n_{2}\cdot a_{2},\cdots,n_{m}\cdot a_{m}\}$是任意一个给定的$m$ 元重集，且重集中每个元素的从数均不小于 $r$ ，则基于该重集的可重复 $r\cdot$ - 组合数为 $C(m-1+r,\ r)$ 。